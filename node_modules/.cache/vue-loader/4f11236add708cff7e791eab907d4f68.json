{"remainingRequest":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\src\\views\\leader\\alter\\alterMessage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\src\\views\\leader\\alter\\alterMessage.vue","mtime":1618966975826},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\babel-loader\\lib\\index.js","mtime":1616485540067},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\vue-loader\\lib\\index.js","mtime":1616485526728}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios';\nimport {\n\tMessage\n} from 'element-ui';\n\n\nfunction insertStr(soure, firstPosition, firstStr, secondPosition, secondStr) {\n\tsoure = soure.slice(0, firstPosition) + firstStr + soure.slice(firstPosition)\n\treturn soure.slice(0, secondPosition) + secondStr + soure.slice(secondPosition)\n}\n\nexport default {\n\tname: 'AlterMessageLeader',\n\tdata() {\n\t\tvar checkID_Card = (rule, value, callback) => {\n\t\t\tif (value.length !== 18) {\n\t\t\t\tcallback(new Error('身份证号长度不正确'))\n\t\t\t} else {\n\t\t\t\tif (!/^\\d{17}(\\d|x)$/i.test(value)) {\n\t\t\t\t\tcallback(new Error('身份证号格式不正确'))\n\t\t\t\t} else {\n\t\t\t\t\t// console.log(value.substring(6,14))\n\t\t\t\t\tif (!/^(19|20)\\d{2}(1[0-2]|0[1-9])(0[1-9]|[1-2][0-9]|3[0-1])$/i.test(value.substring(6, 14))) {\n\t\t\t\t\t\tcallback(new Error('请检查生日'))\n\t\t\t\t\t}\n\t\t\t\t\tvar arr = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2]\n\t\t\t\t\tvar arr2 = value.split('');\n\t\t\t\t\tvar total = 0;\n\t\t\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\t\t\ttotal += ~~arr[i] * ~~arr2[i]\n\t\t\t\t\t}\n\t\t\t\t\t// 校验码\n\t\t\t\t\t// console.log(total % 11)\n\t\t\t\t\t//最后一位的值\n\t\t\t\t\tvar answer = [1, 0, 'X', 9, 8, 7, 6, 5, 4, 3, 2][total % 11]\n\t\t\t\t\tif (answer === Number(arr2[17])) {\n\t\t\t\t\t\tif (arr2[16] % 2 === 1) {\n\t\t\t\t\t\t\tthis.userMessageform.sex = '男'\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.userMessageform.sex = '女'\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar birthday = this.userMessageform.ID_Card.substring(6, 14)\n\t\t\t\t\t\tvar newBirthday = insertStr(birthday, 4, '-', 7, '-')\n\t\t\t\t\t\tthis.userMessageform.birthday = newBirthday\n\n\n\t\t\t\t\t\tcallback()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback(new Error('身份证号输入错误'))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar checkSex = (rule, value, callback) => {\n\n\t\t\tif (value === '男') {\n\t\t\t\tvalue = 1\n\t\t\t} else {\n\t\t\t\tvalue = 0\n\t\t\t}\n\t\t\tvar arr = this.userMessageform.ID_Card.split('');\n\t\t\tif (value !== Number(arr[16] % 2)) {\n\t\t\t\tcallback(new Error('与身份证号不符合'))\n\t\t\t}\n\t\t\tcallback()\n\t\t}\n\n\t\tvar checkBirthday = (rule, value, callback) => {\n\t\t\t// console.log(value)\n\n\t\t\tvar birthday = this.userMessageform.ID_Card.substring(6, 14)\n\t\t\tvar newBirthday = insertStr(birthday, 4, '-', 7, '-')\n\t\t\t// console.log(newBirthday)\n\t\t\tif (value !== newBirthday) {\n\t\t\t\tcallback(new Error('与身份证号不符合'))\n\t\t\t}\n\t\t\tcallback()\n\t\t}\n\n\t\tvar checkPhone = (rule, value, callback) => {\n\t\t\tif (!/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\\d{8}$/.test(value)) {\n\t\t\t\tcallback(new Error('手机号有误，请重填'))\n\t\t\t}\n\t\t\tcallback()\n\t\t}\n\n\n\t\tvar checkEmail = (rule, value, callback) => {\n\t\t\tvar patten =\n\t\t\t\t/^([a-zA-Z0-9]+[_|_|\\-|.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+\\.[a-zA-Z]{2,3}$/;\n\t\t\tif (!patten.test(value)) {\n\t\t\t\tcallback(new Error('邮箱有误，请重填'))\n\t\t\t}\n\t\t\tcallback()\n\t\t}\n\n\t\tvar checkRemark = (rule, value, callback) => {\n\t\t\tcallback()\n\t\t}\n\n\n\n\t\treturn {\n\t\t\tuserMessageform: {\n\t\t\t\tuser: JSON.parse(this.$store.state.token),\n\t\t\t\tID_Card: '',\n\t\t\t\tsex: '',\n\t\t\t\tbirthday: '',\n\t\t\t\tphone: '',\n\t\t\t\temail: '',\n\t\t\t\tremark: ''\n\t\t\t},\n\t\t\t// 为表单验证\n\t\t\trules: {\n\t\t\t\tID_Card: [{\n\t\t\t\t\tvalidator: checkID_Card,\n\t\t\t\t\ttrigger: 'change'\n\t\t\t\t}],\n\t\t\t\tsex: [{\n\t\t\t\t\tvalidator: checkSex,\n\t\t\t\t\ttrigger: 'change'\n\t\t\t\t}],\n\t\t\t\tbirthday: [{\n\t\t\t\t\tvalidator: checkBirthday,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tphone: [{\n\t\t\t\t\tvalidator: checkPhone,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\temail: [{\n\t\t\t\t\tvalidator: checkEmail,\n\t\t\t\t\ttrigger: 'change'\n\t\t\t\t}],\n\t\t\t\tremark: [{\n\t\t\t\t\tvalidator: checkRemark,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}]\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tonSubmit(userMessageform) {\n\t\t\t// 为表单绑定验证功能\n\t\t\tthis.$refs[userMessageform].validate((valid) => {\n\n\t\t\t\t// 当用户，没有按照规则填写登录信息，就会是false\n\t\t\t\tif (valid) {\n\n\t\t\t\t\tthis.$confirm('此操作将修改个人信息, 是否继续?', '提示', {\n\t\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t// 开始获取个人信息\n\t\t\t\t\t\tlet that = this\n\t\t\t\t\t\taxios.put(\n\t\t\t\t\t\t\t\"http://localhost:8080/api/leaderInfos/updateByPrimaryKeyChangeMessage\", {\n\t\t\t\t\t\t\t\tleader_id: JSON.parse(this.$store.state.token).leader_id,\n\t\t\t\t\t\t\t\tpassword: JSON.parse(this.$store.state.token).password,\n\t\t\t\t\t\t\t\tname: JSON.parse(this.$store.state.token).name,\n\t\t\t\t\t\t\t\tid_card: this.userMessageform.ID_Card,\n\t\t\t\t\t\t\t\tsex: this.userMessageform.sex,\n\t\t\t\t\t\t\t\tbirthday: this.userMessageform.birthday,\n\t\t\t\t\t\t\t\tphone: this.userMessageform.phone,\n\t\t\t\t\t\t\t\temail: this.userMessageform.email,\n\t\t\t\t\t\t\t\tremark: this.userMessageform.remark\n\t\t\t\t\t\t\t}).then(function(response) {\n\n\t\t\t\t\t\t\tMessage.success(\"更新成功\")\n\t\t\t\t\t\t\t// 随之更新token\n\t\t\t\t\t\t\tthat.$store.commit('$_setToken', JSON.stringify(response.data));\n\n\n\t\t\t\t\t\t}).catch(function(error) {\n\t\t\t\t\t\t\tMessage.error(\"请检查网络\")\n\t\t\t\t\t\t})\n\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\tmessage: '已取消修改'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\t},\n\tmounted() {\n\t\t// 自动填充 \n\t\tthis.userMessageform.ID_Card = JSON.parse(this.$store.state.token).id_card\n\t\tthis.userMessageform.sex = JSON.parse(this.$store.state.token).sex\n\t\tthis.userMessageform.birthday = JSON.parse(this.$store.state.token).birthday\n\t\tthis.userMessageform.phone = JSON.parse(this.$store.state.token).phone\n\t\tthis.userMessageform.email = JSON.parse(this.$store.state.token).email\n\t\tthis.userMessageform.remark = JSON.parse(this.$store.state.token).remark\n\t}\n}\n",{"version":3,"sources":["alterMessage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"alterMessage.vue","sourceRoot":"src/views/leader/alter","sourcesContent":["<template>\r\n\t<div style=\"margin-left: 30%;margin-top: 20px;\">\r\n\t\t<el-form label-width=\"80px\" :model=\"userMessageform\" ref=\"userMessageform\" :rules=\"rules\">\r\n\t\t\t<!-- <div style=\"float: left;\"> -->\r\n\t\t\t<el-form-item label=\"工号\">\r\n\t\t\t\t<el-input v-model=\"userMessageform.user.leader_id\" :disabled=\"true\" prefix-icon=\"el-icon-user\">\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"姓名\">\r\n\t\t\t\t<el-input v-model=\"userMessageform.user.name\" :disabled=\"true\">\r\n\t\t\t\t\t<i slot=\"prefix\" class=\"iconfont iconziwopingjia\" style=\"margin-left: 4px;\"></i>\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"身份证号\" prop=\"ID_Card\">\r\n\t\t\t\t<el-input v-model=\"userMessageform.ID_Card\" placeholder=\"身份证号\">\r\n\t\t\t\t\t<i slot=\"prefix\" class=\"iconfont iconshenfenzheng\"></i>\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"性别\" prop=\"sex\">\r\n\r\n\t\t\t\t<el-select placeholder=\"性别\" style=\"width: 200px;\" v-model=\"userMessageform.sex\">\r\n\t\t\t\t\t<i slot=\"prefix\" class=\"iconfont iconxingbie\" style=\"margin-left: 4px;\"></i>\r\n\t\t\t\t\t<el-option label=\"男\" value=\"男\"></el-option>\r\n\t\t\t\t\t<el-option label=\"女\" value=\"女\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t</el-form-item>\r\n\t\t\t<!-- </div> -->\r\n\t\t\t<!-- <div style=\"float: right;margin-right: 15%;\"> -->\r\n\t\t\t<el-form-item label=\"出生日期\" prop=\"birthday\">\r\n\t\t\t\t<el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"userMessageform.birthday\"\r\n\t\t\t\t\tvalue-format=\"yyyy-MM-dd\" style=\"width: 200px;\"></el-date-picker>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"电话\" prop=\"phone\">\r\n\t\t\t\t<el-input v-model=\"userMessageform.phone\" placeholder=\"电话\">\r\n\t\t\t\t\t<i slot=\"prefix\" class=\"iconfont icondianhua\"></i>\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"邮箱\" prop=\"email\">\r\n\t\t\t\t<el-input v-model=\"userMessageform.email\" placeholder=\"邮箱\">\r\n\t\t\t\t\t<i slot=\"prefix\" class=\"iconfont iconyouxiang\"></i>\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"自我评价\" prop=\"remark\">\r\n\t\t\t\t<el-input v-model=\"userMessageform.remark\" type=\"textarea\" placeholder=\"自我评价\" style=\"width: 400px;\"\r\n\t\t\t\t\trows=\"5\">\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<!-- </div> -->\r\n\t\t\t<!-- <div style=\"margin-left: 200px;\"> -->\r\n\t\t\t<el-form-item style=\"margin-top: -14px;\">\r\n\t\t\t\t<el-button type=\"primary\" round style=\"width: 150px;\" @click=\"onSubmit('userMessageform')\"\r\n\t\t\t\t\t:plain=\"true\">\r\n\t\t\t\t\t修改个人信息\r\n\t\t\t\t</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t\t<!-- </div> -->\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport axios from 'axios';\r\n\timport {\r\n\t\tMessage\r\n\t} from 'element-ui';\r\n\r\n\r\n\tfunction insertStr(soure, firstPosition, firstStr, secondPosition, secondStr) {\r\n\t\tsoure = soure.slice(0, firstPosition) + firstStr + soure.slice(firstPosition)\r\n\t\treturn soure.slice(0, secondPosition) + secondStr + soure.slice(secondPosition)\r\n\t}\r\n\r\n\texport default {\r\n\t\tname: 'AlterMessageLeader',\r\n\t\tdata() {\r\n\t\t\tvar checkID_Card = (rule, value, callback) => {\r\n\t\t\t\tif (value.length !== 18) {\r\n\t\t\t\t\tcallback(new Error('身份证号长度不正确'))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!/^\\d{17}(\\d|x)$/i.test(value)) {\r\n\t\t\t\t\t\tcallback(new Error('身份证号格式不正确'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// console.log(value.substring(6,14))\r\n\t\t\t\t\t\tif (!/^(19|20)\\d{2}(1[0-2]|0[1-9])(0[1-9]|[1-2][0-9]|3[0-1])$/i.test(value.substring(6, 14))) {\r\n\t\t\t\t\t\t\tcallback(new Error('请检查生日'))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar arr = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2]\r\n\t\t\t\t\t\tvar arr2 = value.split('');\r\n\t\t\t\t\t\tvar total = 0;\r\n\t\t\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\t\ttotal += ~~arr[i] * ~~arr2[i]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 校验码\r\n\t\t\t\t\t\t// console.log(total % 11)\r\n\t\t\t\t\t\t//最后一位的值\r\n\t\t\t\t\t\tvar answer = [1, 0, 'X', 9, 8, 7, 6, 5, 4, 3, 2][total % 11]\r\n\t\t\t\t\t\tif (answer === Number(arr2[17])) {\r\n\t\t\t\t\t\t\tif (arr2[16] % 2 === 1) {\r\n\t\t\t\t\t\t\t\tthis.userMessageform.sex = '男'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.userMessageform.sex = '女'\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar birthday = this.userMessageform.ID_Card.substring(6, 14)\r\n\t\t\t\t\t\t\tvar newBirthday = insertStr(birthday, 4, '-', 7, '-')\r\n\t\t\t\t\t\t\tthis.userMessageform.birthday = newBirthday\r\n\r\n\r\n\t\t\t\t\t\t\tcallback()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcallback(new Error('身份证号输入错误'))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar checkSex = (rule, value, callback) => {\r\n\r\n\t\t\t\tif (value === '男') {\r\n\t\t\t\t\tvalue = 1\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = 0\r\n\t\t\t\t}\r\n\t\t\t\tvar arr = this.userMessageform.ID_Card.split('');\r\n\t\t\t\tif (value !== Number(arr[16] % 2)) {\r\n\t\t\t\t\tcallback(new Error('与身份证号不符合'))\r\n\t\t\t\t}\r\n\t\t\t\tcallback()\r\n\t\t\t}\r\n\r\n\t\t\tvar checkBirthday = (rule, value, callback) => {\r\n\t\t\t\t// console.log(value)\r\n\r\n\t\t\t\tvar birthday = this.userMessageform.ID_Card.substring(6, 14)\r\n\t\t\t\tvar newBirthday = insertStr(birthday, 4, '-', 7, '-')\r\n\t\t\t\t// console.log(newBirthday)\r\n\t\t\t\tif (value !== newBirthday) {\r\n\t\t\t\t\tcallback(new Error('与身份证号不符合'))\r\n\t\t\t\t}\r\n\t\t\t\tcallback()\r\n\t\t\t}\r\n\r\n\t\t\tvar checkPhone = (rule, value, callback) => {\r\n\t\t\t\tif (!/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\\d{8}$/.test(value)) {\r\n\t\t\t\t\tcallback(new Error('手机号有误，请重填'))\r\n\t\t\t\t}\r\n\t\t\t\tcallback()\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar checkEmail = (rule, value, callback) => {\r\n\t\t\t\tvar patten =\r\n\t\t\t\t\t/^([a-zA-Z0-9]+[_|_|\\-|.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+\\.[a-zA-Z]{2,3}$/;\r\n\t\t\t\tif (!patten.test(value)) {\r\n\t\t\t\t\tcallback(new Error('邮箱有误，请重填'))\r\n\t\t\t\t}\r\n\t\t\t\tcallback()\r\n\t\t\t}\r\n\r\n\t\t\tvar checkRemark = (rule, value, callback) => {\r\n\t\t\t\tcallback()\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\treturn {\r\n\t\t\t\tuserMessageform: {\r\n\t\t\t\t\tuser: JSON.parse(this.$store.state.token),\r\n\t\t\t\t\tID_Card: '',\r\n\t\t\t\t\tsex: '',\r\n\t\t\t\t\tbirthday: '',\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t\temail: '',\r\n\t\t\t\t\tremark: ''\r\n\t\t\t\t},\r\n\t\t\t\t// 为表单验证\r\n\t\t\t\trules: {\r\n\t\t\t\t\tID_Card: [{\r\n\t\t\t\t\t\tvalidator: checkID_Card,\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tsex: [{\r\n\t\t\t\t\t\tvalidator: checkSex,\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tbirthday: [{\r\n\t\t\t\t\t\tvalidator: checkBirthday,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tphone: [{\r\n\t\t\t\t\t\tvalidator: checkPhone,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\temail: [{\r\n\t\t\t\t\t\tvalidator: checkEmail,\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tremark: [{\r\n\t\t\t\t\t\tvalidator: checkRemark,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonSubmit(userMessageform) {\r\n\t\t\t\t// 为表单绑定验证功能\r\n\t\t\t\tthis.$refs[userMessageform].validate((valid) => {\r\n\r\n\t\t\t\t\t// 当用户，没有按照规则填写登录信息，就会是false\r\n\t\t\t\t\tif (valid) {\r\n\r\n\t\t\t\t\t\tthis.$confirm('此操作将修改个人信息, 是否继续?', '提示', {\r\n\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\t// 开始获取个人信息\r\n\t\t\t\t\t\t\tlet that = this\r\n\t\t\t\t\t\t\taxios.put(\r\n\t\t\t\t\t\t\t\t\"http://localhost:8080/api/leaderInfos/updateByPrimaryKeyChangeMessage\", {\r\n\t\t\t\t\t\t\t\t\tleader_id: JSON.parse(this.$store.state.token).leader_id,\r\n\t\t\t\t\t\t\t\t\tpassword: JSON.parse(this.$store.state.token).password,\r\n\t\t\t\t\t\t\t\t\tname: JSON.parse(this.$store.state.token).name,\r\n\t\t\t\t\t\t\t\t\tid_card: this.userMessageform.ID_Card,\r\n\t\t\t\t\t\t\t\t\tsex: this.userMessageform.sex,\r\n\t\t\t\t\t\t\t\t\tbirthday: this.userMessageform.birthday,\r\n\t\t\t\t\t\t\t\t\tphone: this.userMessageform.phone,\r\n\t\t\t\t\t\t\t\t\temail: this.userMessageform.email,\r\n\t\t\t\t\t\t\t\t\tremark: this.userMessageform.remark\r\n\t\t\t\t\t\t\t\t}).then(function(response) {\r\n\r\n\t\t\t\t\t\t\t\tMessage.success(\"更新成功\")\r\n\t\t\t\t\t\t\t\t// 随之更新token\r\n\t\t\t\t\t\t\t\tthat.$store.commit('$_setToken', JSON.stringify(response.data));\r\n\r\n\r\n\t\t\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\t\t\tMessage.error(\"请检查网络\")\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\tmessage: '已取消修改'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// 自动填充 \r\n\t\t\tthis.userMessageform.ID_Card = JSON.parse(this.$store.state.token).id_card\r\n\t\t\tthis.userMessageform.sex = JSON.parse(this.$store.state.token).sex\r\n\t\t\tthis.userMessageform.birthday = JSON.parse(this.$store.state.token).birthday\r\n\t\t\tthis.userMessageform.phone = JSON.parse(this.$store.state.token).phone\r\n\t\t\tthis.userMessageform.email = JSON.parse(this.$store.state.token).email\r\n\t\t\tthis.userMessageform.remark = JSON.parse(this.$store.state.token).remark\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.el-input {\r\n\t\twidth: 200px;\r\n\t}\r\n</style>\n"]}]}