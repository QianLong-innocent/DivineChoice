{"remainingRequest":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\src\\views\\student\\choice\\choiceTypeOne.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\src\\views\\student\\choice\\choiceTypeOne.vue","mtime":1618817791949},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\babel-loader\\lib\\index.js","mtime":1616485540067},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\vue-loader\\lib\\index.js","mtime":1616485526728}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport { Message } from 'element-ui';\nexport default {\n  name: 'ChoiceTypeOne',\n  data: function data() {\n    return {\n      teacherName: '',\n      teacherNameArray: '',\n      tableData: [],\n      currentPage: 1,\n      loading: false,\n      dialogFormVisible: false,\n      form: {\n        volunteer: '',\n        project_name: ''\n      }\n    };\n  },\n  methods: {\n    cancelChoice: function cancelChoice() {\n      this.dialogFormVisible = false;\n      Message.error(\"取消选题\");\n    },\n    confirmChoice: function confirmChoice() {\n      var that = this;\n      axios.put(\"http://localhost:8080/api/studentChoices/updateChoiceProject\", {\n        student_id: JSON.parse(that.$store.state.token).student_id,\n        name: that.form.project_name,\n        volunteer: that.form.volunteer\n      }).then(function (response) {\n        that.dialogFormVisible = false; // console.log(this.form.project_id)\n\n        that.$message({\n          message: '选题成功',\n          type: 'success',\n          duration: '1000',\n          center: true\n        });\n        that.loading = true;\n        that.timer = setTimeout(function () {\n          //设置延迟执行\n          that.loading = false;\n          that.searchTeacherProject();\n        }, 1000);\n      }).catch(function (error) {\n        that.dialogFormVisible = false;\n        Message.error(error.response.data);\n      });\n    },\n    clickRowHandle: function clickRowHandle(index, row) {\n      this.$refs.evtTable.toggleRowExpansion(row);\n    },\n    handleEdit: function handleEdit(index, row) {\n      // 跳二级标题。\n      this.dialogFormVisible = true;\n      this.form.project_name = row.project_name; // console.log(index, row);\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    indexMethod: function indexMethod(index) {\n      return (this.currentPage - 1) * 10 + index + 1;\n    },\n    searchTeacherProject: function searchTeacherProject() {\n      var that = this;\n      axios.get(\"http://localhost:8080/api/teacherProjects/selectTeacherProject/\" + that.teacherName, {\n        params: {\n          id: JSON.parse(that.$store.state.token).student_id\n        }\n      }).then(function (response) {\n        that.tableData = response.data; // console.log(that.tableData)\n\n        Message.success(\"查询成功\");\n        document.getElementById('paging').style.display = 'block';\n      }).catch(function (error) {\n        console.log(error);\n        Message.error(\"请检查网络\");\n      });\n    }\n  },\n  mounted: function mounted() {\n    var that = this;\n    axios.get(\"http://localhost:8080/api/teacherProjects/selectTeacherName\").then(function (response) {\n      that.teacherNameArray = response.data;\n    }).catch(function (error) {\n      Message.error(\"请检查网络\");\n    });\n  }\n};",{"version":3,"sources":["choiceTypeOne.vue"],"names":[],"mappings":"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","sourcesContent":["<template id=\"choiceTypeOne\">\r\n\t<div style=\"background-color: #FFFFFF;\">\r\n\t\t<!-- 上半部分 -->\r\n\t\t<div style=\"height: 60px;\">\r\n\t\t\t<div style=\"padding: 12px;\">\r\n\t\t\t\t&nbsp;\r\n\t\t\t\t老师姓名\r\n\t\t\t\t&emsp;\r\n\t\t\t\t<el-select placeholder=\"\" v-model=\"teacherName\">\r\n\t\t\t\t\t<!-- 获取获取所有老师 -->\r\n\t\t\t\t\t<el-option v-for=\"item in teacherNameArray\" :label=\"item\" :value=\"item\" :key=\"item\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t\t&emsp;\r\n\t\t\t\t<el-button type=\"primary\" @click=\"searchTeacherProject()\">\r\n\t\t\t\t\t<i class=\"iconfont iconxingtaiduICON_sousuo---copy\"></i>\r\n\t\t\t\t\t搜索\r\n\t\t\t\t</el-button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- 下半部分 -->\r\n\t\t<div style=\"height: 570px;\">\r\n\t\t\t<div style=\"padding: 12px;\">\r\n\t\t\t\t<!-- 搜索按钮触发之后刷新tableData -->\r\n\t\t\t\t<el-table :data=\"tableData.slice((currentPage-1)*10,currentPage*10)\" style=\"width: 100%\" height=\"520px\"\r\n\t\t\t\t\tstripe ref=\"evtTable\" v-loading=\"loading\">\r\n\t\t\t\t\t<el-table-column label=\"#\" :index=\"indexMethod\" type=\"index\" align=\"center\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"project_id\" label=\"项目编号\" align=\"center\" />\r\n\t\t\t\t\t<el-table-column prop=\"project_name\" label=\"项目名称\" align=\"center\" />\r\n\t\t\t\t\t<el-table-column label=\"操作\" width=\"300\" align=\"center\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"mini\" @click=\"clickRowHandle(scope.$index, scope.row)\">\r\n\t\t\t\t\t\t\t\t<i class=\"iconfont iconxiangqing\"></i>\r\n\t\t\t\t\t\t\t\t查看详情\r\n\t\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">\r\n\t\t\t\t\t\t\t\t<i class=\"iconfont iconxuanze\"></i>\r\n\t\t\t\t\t\t\t\t选题\r\n\t\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<!-- 展开行 -->\r\n\t\t\t\t\t<el-table-column type=\"expand\" width=\"1\">\r\n\t\t\t\t\t\t<template slot-scope=\"props\">\r\n\t\t\t\t\t\t\t&emsp;&emsp;{{props.row.project_content}}\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t</el-table>\r\n\t\t\t\t<el-pagination @current-change=\"handleCurrentChange\" :current-page.sync=\"currentPage\" :page-size=\"10\"\r\n\t\t\t\t\tlayout=\"total, prev, pager, next\" :total='tableData.length' id=\"paging\">\r\n\t\t\t\t</el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 选题嵌套表单 -->\r\n\t\t<el-dialog title=\"选题\" :visible.sync=\"dialogFormVisible\" style=\"width: 600px;margin-left: 30%;margin-top: 5%;\">\r\n\t\t\t<el-form :model=\"form\">\r\n\t\t\t\t<el-form-item label=\"志愿\">\r\n\t\t\t\t\t<el-select v-model=\"form.volunteer\" placeholder=\"请选择志愿\" style=\"width: 200px;\">\r\n\t\t\t\t\t\t<el-option label=\"第一志愿\" value=\"1\"></el-option>\r\n\t\t\t\t\t\t<el-option label=\"第二志愿\" value=\"2\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"cancelChoice()\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"confirmChoice()\">确 定</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport axios from 'axios';\r\n\timport {\r\n\t\tMessage\r\n\t} from 'element-ui';\r\n\texport default {\r\n\t\tname: 'ChoiceTypeOne',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tteacherName: '',\r\n\t\t\t\tteacherNameArray: '',\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tcurrentPage: 1,\r\n\t\t\t\tloading:false,\r\n\t\t\t\tdialogFormVisible: false,\r\n\t\t\t\tform: {\r\n\t\t\t\t\tvolunteer: '',\r\n\t\t\t\t\tproject_name: ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcancelChoice() {\r\n\t\t\t\tthis.dialogFormVisible = false\r\n\t\t\t\tMessage.error(\"取消选题\")\r\n\t\t\t},\r\n\t\t\tconfirmChoice() {\r\n\r\n\t\t\t\tlet that = this\r\n\t\t\t\taxios.put(\"http://localhost:8080/api/studentChoices/updateChoiceProject\", {\r\n\t\t\t\t\t\tstudent_id: JSON.parse(that.$store.state.token).student_id,\r\n\t\t\t\t\t\tname: that.form.project_name,\r\n\t\t\t\t\t\tvolunteer: that.form.volunteer\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(function(response) {\r\n\r\n\t\t\t\t\t\tthat.dialogFormVisible = false\r\n\t\t\t\t\t\t// console.log(this.form.project_id)\r\n\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\tmessage: '选题成功',\r\n\t\t\t\t\t\t\ttype:'success',\r\n\t\t\t\t\t\t\tduration:'1000',\r\n\t\t\t\t\t\t\tcenter: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.loading = true\r\n\t\t\t\t\t\tthat.timer = setTimeout(() => { //设置延迟执行\r\n\t\t\t\t\t\t\tthat.loading = false\r\n\t\t\t\t\t\t\tthat.searchTeacherProject()\r\n\t\t\t\t\t\t}, 1000);\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\r\n\t\t\t\t\t\tthat.dialogFormVisible = false\r\n\r\n\t\t\t\t\t\tMessage.error(error.response.data)\r\n\t\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tclickRowHandle(index, row) {\r\n\t\t\t\tthis.$refs.evtTable.toggleRowExpansion(row);\r\n\t\t\t},\r\n\t\t\thandleEdit(index, row) {\r\n\r\n\t\t\t\t// 跳二级标题。\r\n\t\t\t\tthis.dialogFormVisible = true\r\n\t\t\t\tthis.form.project_name = row.project_name\r\n\t\t\t\t// console.log(index, row);\r\n\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(val) {\r\n\t\t\t\tthis.currentPage = val;\r\n\t\t\t},\r\n\t\t\tindexMethod(index) {\r\n\t\t\t\treturn (this.currentPage - 1) * 10 + index + 1\r\n\t\t\t},\r\n\t\t\tsearchTeacherProject() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\taxios.get(\"http://localhost:8080/api/teacherProjects/selectTeacherProject/\" + that.teacherName, {\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tid: JSON.parse(that.$store.state.token).student_id,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\tthat.tableData = response.data\r\n\t\t\t\t\t\t// console.log(that.tableData)\r\n\t\t\t\t\t\tMessage.success(\"查询成功\")\r\n\t\t\t\t\t\tdocument.getElementById('paging').style.display = 'block'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t\tMessage.error(\"请检查网络\")\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tlet that = this\r\n\t\t\taxios.get(\"http://localhost:8080/api/teacherProjects/selectTeacherName\")\r\n\t\t\t\t.then(function(response) {\r\n\r\n\t\t\t\t\tthat.teacherNameArray = response.data\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\tMessage.error(\"请检查网络\")\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t#paging {\r\n\t\tdisplay: none;\r\n\t\tfloat: right;\r\n\t}\r\n</style>\n"],"sourceRoot":"src/views/student/choice"}]}