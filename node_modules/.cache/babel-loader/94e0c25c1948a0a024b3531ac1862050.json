{"remainingRequest":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\src\\views\\leader\\alter\\alterPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\src\\views\\leader\\alter\\alterPassword.vue","mtime":1618967682570},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\babel-loader\\lib\\index.js","mtime":1616485540067},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\vue-loader\\lib\\index.js","mtime":1616485526728}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport { Message } from 'element-ui';\nexport default {\n  name: 'AlterPasswordTeacher',\n  data: function data() {\n    var _this = this;\n\n    var checkPassword = function checkPassword(rule, value, callback) {\n      if (value === '') {\n        return callback(new Error('原密码不能为空'));\n      } else if (value !== JSON.parse(_this.$store.state.token).password) {\n        return callback(new Error('与原密码不一致'));\n      }\n\n      callback();\n    };\n\n    var checkalterPass = function checkalterPass(rule, value, callback) {\n      if (value === '') {\n        return callback(new Error('修改密码不能为空'));\n      } else if (_this.form.confirmPassword !== '') {\n        if (value !== _this.form.confirmPassword) {\n          return callback(new Error('两次密码不一致'));\n        }\n      }\n\n      callback();\n    };\n\n    var checkConfirmPass = function checkConfirmPass(rule, value, callback) {\n      if (value === '') {\n        return callback(new Error('确认密码不能为空'));\n      } else if (_this.form.alterPassword !== '') {\n        if (value !== _this.form.alterPassword) {\n          return callback(new Error('两次密码不一致'));\n        }\n      }\n\n      callback();\n    };\n\n    return {\n      form: {\n        originalPassword: '',\n        alterPassword: '',\n        confirmPassword: ''\n      },\n      // 表单验证，需要在 el-form-item 元素中增加 prop 属性\n      rules: {\n        originalPassword: [{\n          required: true,\n          validator: checkPassword,\n          trigger: 'blur'\n        }],\n        alterPassword: [{\n          required: true,\n          validator: checkalterPass,\n          trigger: 'blur'\n        }],\n        confirmPassword: [{\n          required: true,\n          validator: checkConfirmPass,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    onSubmit: function onSubmit(form) {\n      var _this2 = this;\n\n      // 为表单绑定验证功能\n      this.$refs[form].validate(function (valid) {\n        // 当用户，没有按照规则填写登录信息，就会是false\n        if (valid) {\n          _this2.$confirm('此操作将修改密码, 是否继续?', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(function () {\n            // 开始登录验证\n            var that = _this2;\n            axios.put(\"http://localhost:8080/api/leaderInfos/updateByPrimaryKeyChangePassword\", {\n              leader_id: JSON.parse(_this2.$store.state.token).leader_id,\n              passwordBefore: _this2.form.originalPassword,\n              password: _this2.form.alterPassword\n            }).then(function (response) {\n              Message.success(\"更新密码成功\");\n              var flag = JSON.parse(that.$store.state.token);\n              flag.password = that.form.alterPassword;\n              that.$store.commit('$_setToken', JSON.stringify(flag)); // console.log(JSON.parse(that.$store.state.token))\n\n              that.form.originalPassword = '';\n              that.form.alterPassword = '';\n              that.form.confirmPassword = '';\n            }).catch(function (error) {\n              Message.error(\"原密码错误\");\n            });\n          }).catch(function () {\n            _this2.$message({\n              type: 'error',\n              message: '已取消修改密码'\n            });\n          });\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["alterPassword.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div style=\"margin-top: 100px;margin-left: 50px;\">\r\n\t\t<el-form label-width=\"80px\" :model=\"form\" status-icon :rules=\"rules\" ref=\"alterPassword\">\r\n\t\t\t<el-form-item label=\"原密码\" prop=\"originalPassword\">\r\n\t\t\t\t<el-input v-model=\"form.originalPassword\" style=\"width: 200px;\" prefix-icon=\"el-icon-lock\" show-password\r\n\t\t\t\t\tplaceholder=\"请输入原密码\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"修改密码\" prop=\"alterPassword\">\r\n\t\t\t\t<el-input v-model=\"form.alterPassword\" style=\"width: 200px;\" prefix-icon=\"el-icon-lock\" show-password\r\n\t\t\t\t\tplaceholder=\"请输入修改之后密码\" @keyup.enter.native=\"onSubmit('alterPassword')\">\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"确认密码\" prop=\"confirmPassword\">\r\n\t\t\t\t<el-input v-model=\"form.confirmPassword\" style=\"width: 200px;\" prefix-icon=\"el-icon-lock\" show-password\r\n\t\t\t\t\tplaceholder=\"请确认修改之后密码\" @keyup.enter.native=\"onSubmit('alterPassword')\">\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" round style=\"width: 100px;\" @click=\"onSubmit('alterPassword')\" :plain=\"true\">\r\n\t\t\t\t\t确认\r\n\t\t\t\t</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport axios from 'axios';\r\n\timport {\r\n\t\tMessage\r\n\t} from 'element-ui';\r\n\texport default {\r\n\t\tname: 'AlterPasswordTeacher',\r\n\t\tdata() {\r\n\r\n\t\t\tvar checkPassword = (rule, value, callback) => {\r\n\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\treturn callback(new Error('原密码不能为空'))\r\n\t\t\t\t} else if (value !== JSON.parse(this.$store.state.token).password) {\r\n\t\t\t\t\treturn callback(new Error('与原密码不一致'))\r\n\t\t\t\t}\r\n\t\t\t\tcallback()\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar checkalterPass = (rule, value, callback) => {\r\n\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\treturn callback(new Error('修改密码不能为空'))\r\n\t\t\t\t} else if (this.form.confirmPassword !== '') {\r\n\t\t\t\t\tif (value !== this.form.confirmPassword) {\r\n\t\t\t\t\t\treturn callback(new Error('两次密码不一致'))\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcallback()\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar checkConfirmPass = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\treturn callback(new Error('确认密码不能为空'))\r\n\t\t\t\t} else if (this.form.alterPassword !== '') {\r\n\t\t\t\t\tif (value !== this.form.alterPassword) {\r\n\t\t\t\t\t\treturn callback(new Error('两次密码不一致'))\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcallback()\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn {\r\n\t\t\t\tform: {\r\n\t\t\t\t\toriginalPassword: '',\r\n\t\t\t\t\talterPassword: '',\r\n\t\t\t\t\tconfirmPassword: ''\r\n\t\t\t\t},\r\n\t\t\t\t// 表单验证，需要在 el-form-item 元素中增加 prop 属性\r\n\t\t\t\trules: {\r\n\t\t\t\t\toriginalPassword: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tvalidator: checkPassword,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\talterPassword: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tvalidator: checkalterPass,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tconfirmPassword: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tvalidator: checkConfirmPass,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}]\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonSubmit(form) {\r\n\r\n\t\t\t\t// 为表单绑定验证功能\r\n\t\t\t\tthis.$refs[form].validate((valid) => {\r\n\r\n\t\t\t\t\t// 当用户，没有按照规则填写登录信息，就会是false\r\n\t\t\t\t\tif (valid) {\r\n\r\n\t\t\t\t\t\tthis.$confirm('此操作将修改密码, 是否继续?', '提示', {\r\n\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 开始登录验证\r\n\t\t\t\t\t\t\tlet that = this\r\n\t\t\t\t\t\t\taxios.put(\"http://localhost:8080/api/leaderInfos/updateByPrimaryKeyChangePassword\", {\r\n\t\t\t\t\t\t\t\tleader_id: JSON.parse(this.$store.state.token).leader_id,\r\n\t\t\t\t\t\t\t\tpasswordBefore: this.form.originalPassword,\r\n\t\t\t\t\t\t\t\tpassword: this.form.alterPassword\r\n\t\t\t\t\t\t\t}).then(function(response) {\r\n\t\t\t\t\t\t\t\tMessage.success(\"更新密码成功\")\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar flag = JSON.parse(that.$store.state.token)\r\n\t\t\t\t\t\t\t\tflag.password = that.form.alterPassword\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthat.$store.commit('$_setToken', JSON.stringify(flag));\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// console.log(JSON.parse(that.$store.state.token))\r\n\t\t\t\t\t\t\t\tthat.form.originalPassword = ''\r\n\t\t\t\t\t\t\t\tthat.form.alterPassword = ''\r\n\t\t\t\t\t\t\t\tthat.form.confirmPassword = ''\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\t\t\tMessage.error(\"原密码错误\")\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\tmessage: '已取消修改密码'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\n"],"sourceRoot":"src/views/leader/alter"}]}