{"remainingRequest":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\src\\views\\teacher\\choice\\choiceStudent.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\src\\views\\teacher\\choice\\choiceStudent.vue","mtime":1621393834100},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\babel-loader\\lib\\index.js","mtime":1616485540067},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\vue-loader\\lib\\index.js","mtime":1616485526728},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\babel-loader\\lib\\index.js","mtime":1616485540067},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\vue-loader\\lib\\index.js","mtime":1616485526728}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport { Message } from 'element-ui';\nexport default {\n  name: \"ChoiceStudent\",\n  data: function data() {\n    return {\n      dialogFormVisible: false,\n      loading: false,\n      currentPage: 1,\n      professional: '',\n      tableData: [],\n      studentInfo: {\n        remark: '',\n        phone: ''\n      }\n    };\n  },\n  methods: {\n    handleDelete: function handleDelete(index, row) {\n      var _this = this;\n\n      if (row.studentInfo === null) {\n        Message.warning(\"该项目还未被选择\");\n        return;\n      }\n\n      this.$confirm('此操作将退选该学生, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var that = _this;\n        axios.put(\"http://localhost:8080/api/studentChoices/deleteChoiceProject\", {\n          id: row.studentInfo.student_id,\n          volunteer: row.volunteer\n        }).then(function (response) {\n          // that.deleteF5()\n          that.$message({\n            message: '退选成功',\n            type: 'success',\n            duration: '1000',\n            center: true\n          });\n          that.loading = true;\n          that.timer = setTimeout(function () {\n            //设置延迟执行\n            that.loading = false;\n            that.searchTeacherProject();\n          }, 1000);\n        }).catch(function (error) {\n          Message.error(error.response.data);\n        });\n      }).catch(function () {\n        _this.$message({\n          type: 'error',\n          message: '已取消'\n        });\n      });\n    },\n    handleChoice: function handleChoice(index, row) {\n      var _this2 = this;\n\n      if (row.studentInfo === null) {\n        Message.warning(\"该项目还未被选择\");\n        return;\n      }\n\n      this.$confirm('此操作将锁定彼此, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var that = _this2;\n        axios.post(\"http://localhost:8080/api/teacherProjects/choiceStudent\", {\n          studentInfo: row.studentInfo,\n          teacherProject: row.teacherProject,\n          volunteer: row.volunteer,\n          choice: row.choice\n        }).then(function (response) {\n          // that.deleteF5()\n          that.$message({\n            message: '选择成功',\n            type: 'success',\n            duration: '1000',\n            center: true\n          });\n          that.loading = true;\n          that.timer = setTimeout(function () {\n            //设置延迟执行\n            that.loading = false;\n            that.searchTeacherProject();\n          }, 1000);\n        }).catch(function (error) {\n          Message.error(error.response.data);\n        });\n      }).catch(function () {\n        _this2.$message({\n          type: 'error',\n          message: '已取消'\n        });\n      });\n    },\n    cancelEdit: function cancelEdit() {\n      this.dialogFormVisible = false;\n    },\n    confirmEdit: function confirmEdit() {\n      this.dialogFormVisible = false;\n    },\n    clickRowHandle: function clickRowHandle(index, row) {\n      if (row.studentInfo === null) {\n        Message.warning(\"该项目还未被选择\");\n      } else {\n        this.studentInfo.remark = row.studentInfo.remark;\n        this.studentInfo.phone = row.studentInfo.phone;\n        this.dialogFormVisible = true;\n      }\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    searchTeacherProject: function searchTeacherProject() {\n      var that = this;\n      axios.get(\"http://localhost:8080/api/teacherProjects/\" + this.professional, {\n        params: {\n          teacherName: JSON.parse(that.$store.state.token).name\n        }\n      }).then(function (response) {\n        that.tableData = response.data;\n        Message.success(\"查询成功\"); // console.log(that.tableData)\n\n        document.getElementById('paging').style.display = 'block';\n      }).catch(function (error) {\n        // console.log(error)\n        Message.error(\"请检查网络\");\n      });\n    },\n    objectSpanMethod: function objectSpanMethod(_ref) {\n      var row = _ref.row,\n          column = _ref.column,\n          rowIndex = _ref.rowIndex,\n          columnIndex = _ref.columnIndex;\n\n      if (columnIndex === 0) {\n        if (rowIndex % 2 === 0) {\n          return {\n            rowspan: 2,\n            colspan: 1\n          };\n        } else {\n          return {\n            rowspan: 0,\n            colspan: 0\n          };\n        }\n      }\n    }\n  },\n  mounted: function mounted() {}\n};",{"version":3,"sources":["choiceStudent.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div style=\"background-color: #FFFFFF;\">\r\n\t\t<!-- 上半部分 -->\r\n\t\t<div style=\"height: 60px;\">\r\n\t\t\t<div style=\"padding: 12px;\">\r\n\t\t\t\t&nbsp;\r\n\t\t\t\t学生专业\r\n\t\t\t\t&emsp;\r\n\t\t\t\t<el-select placeholder=\"\" v-model=\"professional\">\r\n\t\t\t\t\t<el-option label=\"计算机科学与技术\" value=\"selectAllTeacherProjectForComputerForChoice\"></el-option>\r\n\t\t\t\t\t<el-option label=\"软件工程\" value=\"selectAllTeacherProjectForSoftForChoice\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t\t&emsp;\r\n\t\t\t\t<el-button type=\"primary\" @click=\"searchTeacherProject()\">\r\n\t\t\t\t\t<i class=\"iconfont iconxingtaiduICON_sousuo---copy\"></i>\r\n\t\t\t\t\t搜索\r\n\t\t\t\t</el-button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\r\n\t\t<!-- 下半部分 -->\r\n\t\t<div style=\"height: 570px;\">\r\n\t\t\t<div style=\"padding: 12px;\">\r\n\r\n\t\t\t\t<el-table :data=\"tableData.slice((currentPage-1)*10,currentPage*10)\" border\r\n\t\t\t\t\t:span-method=\"objectSpanMethod\" style=\"width: 100%\" height=\"520px\" v-loading=\"loading\">\r\n\t\t\t\t\t<el-table-column prop=\"teacherProject.project_id\" label=\"项目编号\" width=\"80px\" align=\"center\">\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"teacherProject.project_name\" label=\"项目名\" align=\"center\" width=\"400px\">\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"studentInfo.name\" label=\"学生姓名\" align=\"center\">\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"volunteer\" label=\"志愿\" align=\"center\">\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"choice\" label=\"状态\" align=\"center\">\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column label=\"操作\" width=\"300\" align=\"center\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"mini\" @click=\"clickRowHandle(scope.$index, scope.row)\">\r\n\t\t\t\t\t\t\t\t<i class=\"iconfont iconxiangqing\"></i>\r\n\t\t\t\t\t\t\t\t查看详情\r\n\t\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t\t<el-button type=\"warning\" size=\"mini\" @click=\"handleChoice(scope.$index, scope.row)\">\r\n\t\t\t\t\t\t\t\t<i class=\"iconfont iconbianji\"></i>\r\n\t\t\t\t\t\t\t\t选择\r\n\t\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t\t<el-button type=\"danger\" size=\"mini\" @click=\"handleDelete(scope.$index, scope.row)\">\r\n\t\t\t\t\t\t\t\t<i class=\"iconfont iconshanchu\"></i>\r\n\t\t\t\t\t\t\t\t退选\r\n\t\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t</el-table>\r\n\r\n\t\t\t\t<el-pagination @current-change=\"handleCurrentChange\" :current-page.sync=\"currentPage\" :page-size=\"10\"\r\n\t\t\t\t\tlayout=\"total, prev, pager, next\" :total='tableData.length' id=\"paging\">\r\n\t\t\t\t</el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 选题嵌套表单 -->\r\n\t\t<el-dialog title=\"查看\" :visible.sync=\"dialogFormVisible\" style=\"width: 1300px;margin-left: 10%;margin-top: 5%;\">\r\n\t\t\t<el-form :model=\"studentInfo\">\r\n\t\t\t\t<el-form-item label=\"电话\">\r\n\t\t\t\t\t&emsp;\r\n\t\t\t\t\t<el-input v-model=\"studentInfo.phone\" style=\"width: 500px;\" :disabled=\"true\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"个人介绍\">\r\n\t\t\t\t\t<el-input v-model=\"studentInfo.remark\" type=\"textarea\" placeholder=\"学生个人介绍\" style=\"width: 500px;\"\r\n\t\t\t\t\t\trows=\"5\" :disabled=\"true\">\r\n\t\t\t\t\t</el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"cancelEdit()\">关 闭</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"confirmEdit()\">确 定</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport axios from 'axios';\r\n\timport {\r\n\t\tMessage\r\n\t} from 'element-ui';\r\n\texport default {\r\n\t\tname: \"ChoiceStudent\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdialogFormVisible: false,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tcurrentPage: 1,\r\n\t\t\t\tprofessional: '',\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tstudentInfo: {\r\n\t\t\t\t\tremark: '',\r\n\t\t\t\t\tphone: ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleDelete(index, row) {\r\n\t\t\t\tif (row.studentInfo === null) {\r\n\t\t\t\t\tMessage.warning(\"该项目还未被选择\")\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$confirm('此操作将退选该学生, 是否继续?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\r\n\t\t\t\t\tlet that = this\r\n\t\t\t\t\taxios.put(\"http://localhost:8080/api/studentChoices/deleteChoiceProject\", {\r\n\t\t\t\t\t\t\tid: row.studentInfo.student_id,\r\n\t\t\t\t\t\t\tvolunteer: row.volunteer\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t\t// that.deleteF5()\r\n\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\tmessage: '退选成功',\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\tduration: '1000',\r\n\t\t\t\t\t\t\t\tcenter: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthat.loading = true\r\n\t\t\t\t\t\t\tthat.timer = setTimeout(() => { //设置延迟执行\r\n\t\t\t\t\t\t\t\tthat.loading = false\r\n\t\t\t\t\t\t\t\tthat.searchTeacherProject()\r\n\t\t\t\t\t\t\t}, 1000);\r\n\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\tMessage.error(error.response.data)\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: '已取消'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleChoice(index, row) {\r\n\t\t\t\tif (row.studentInfo === null) {\r\n\t\t\t\t\tMessage.warning(\"该项目还未被选择\")\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.$confirm('此操作将锁定彼此, 是否继续?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tlet that = this\r\n\t\t\t\t\taxios.post(\"http://localhost:8080/api/teacherProjects/choiceStudent\", {\r\n\t\t\t\t\t\t\tstudentInfo:row.studentInfo,\r\n\t\t\t\t\t\t\tteacherProject:row.teacherProject,\r\n\t\t\t\t\t\t\tvolunteer:row.volunteer,\r\n\t\t\t\t\t\t\tchoice:row.choice\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t\t// that.deleteF5()\r\n\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\tmessage: '选择成功',\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\tduration: '1000',\r\n\t\t\t\t\t\t\t\tcenter: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthat.loading = true\r\n\t\t\t\t\t\t\tthat.timer = setTimeout(() => { //设置延迟执行\r\n\t\t\t\t\t\t\t\tthat.loading = false\r\n\t\t\t\t\t\t\t\tthat.searchTeacherProject()\r\n\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\tMessage.error(error.response.data)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: '已取消'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcancelEdit() {\r\n\t\t\t\tthis.dialogFormVisible = false\r\n\t\t\t},\r\n\t\t\tconfirmEdit() {\r\n\t\t\t\tthis.dialogFormVisible = false\r\n\t\t\t},\r\n\t\t\tclickRowHandle(index, row) {\r\n\t\t\t\tif (row.studentInfo === null) {\r\n\t\t\t\t\tMessage.warning(\"该项目还未被选择\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.studentInfo.remark = row.studentInfo.remark\r\n\t\t\t\t\tthis.studentInfo.phone = row.studentInfo.phone\r\n\t\t\t\t\tthis.dialogFormVisible = true\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(val) {\r\n\t\t\t\tthis.currentPage = val;\r\n\t\t\t},\r\n\t\t\tsearchTeacherProject() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\taxios.get(\"http://localhost:8080/api/teacherProjects/\" + this.professional, {\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tteacherName: JSON.parse(that.$store.state.token).name\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\tthat.tableData = response.data\r\n\t\t\t\t\t\tMessage.success(\"查询成功\")\r\n\t\t\t\t\t\t// console.log(that.tableData)\r\n\t\t\t\t\t\tdocument.getElementById('paging').style.display = 'block'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t// console.log(error)\r\n\t\t\t\t\t\tMessage.error(\"请检查网络\")\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tobjectSpanMethod({\r\n\t\t\t\trow,\r\n\t\t\t\tcolumn,\r\n\t\t\t\trowIndex,\r\n\t\t\t\tcolumnIndex\r\n\t\t\t}) {\r\n\t\t\t\tif (columnIndex === 0) {\r\n\t\t\t\t\tif (rowIndex % 2 === 0) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\trowspan: 2,\r\n\t\t\t\t\t\t\tcolspan: 1\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\trowspan: 0,\r\n\t\t\t\t\t\t\tcolspan: 0\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\n"],"sourceRoot":"src/views/teacher/choice"}]}