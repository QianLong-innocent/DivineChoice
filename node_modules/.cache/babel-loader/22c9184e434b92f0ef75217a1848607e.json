{"remainingRequest":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\src\\views\\leader\\manager\\messageTea.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\src\\views\\leader\\manager\\messageTea.vue","mtime":1620372673694},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\babel-loader\\lib\\index.js","mtime":1616485540067},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616485460902},{"path":"C:\\Users\\xiaoxi\\Desktop\\毕业设计\\Mr.Qin\\DivineChoice\\node_modules\\vue-loader\\lib\\index.js","mtime":1616485526728}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport FileSaver from 'file-saver';\nimport XLSX from 'xlsx';\nimport axios from 'axios';\nimport { Message } from 'element-ui';\nexport default {\n  name: \"MessageTea\",\n  data: function data() {\n    return {\n      dialogFormVisible: false,\n      loading: false,\n      teacherName: '',\n      tableData: [],\n      currentPage: 1,\n      form: {\n        teacherID: '',\n        teacherName: '',\n        password: ''\n      }\n    };\n  },\n  methods: {\n    confirmChoice: function confirmChoice() {\n      var _this = this;\n\n      this.dialogFormVisible = false;\n      this.$confirm('此操作将修改教师基本信息, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        // console.log(this.form)\n        var that = _this;\n        axios.post(\"http://localhost:8080/api/teacherInfos/updateTeacherInfo\", {\n          teacher_id: _this.form.teacherID,\n          password: _this.form.password,\n          name: _this.form.teacherName\n        }).then(function (response) {\n          // console.log(that.form)\n          that.dialogFormVisible = false;\n          that.$message({\n            message: '编辑成功',\n            type: 'success',\n            duration: '1000',\n            center: true\n          });\n          that.loading = true;\n          that.timer = setTimeout(function () {\n            //设置延迟执行\n            that.loading = false;\n            that.init();\n          }, 1000);\n        }).catch(function (error) {\n          that.dialogFormVisible = false;\n          Message.error(error.response.data);\n        });\n      }).catch(function () {\n        _this.$message({\n          type: 'error',\n          message: '已取消'\n        });\n      });\n    },\n    cancelChoice: function cancelChoice() {\n      this.dialogFormVisible = false;\n      Message.error(\"已取消\");\n    },\n    clickRowHandle: function clickRowHandle(index, row) {\n      this.$refs.evtTable.toggleRowExpansion(row);\n    },\n    handleEdit: function handleEdit(index, row) {\n      this.form.teacherID = row.teacher_id;\n      this.form.teacherName = row.name;\n      this.form.password = row.password;\n      this.dialogFormVisible = true;\n    },\n    handleDelete: function handleDelete(index, row) {\n      Message.success(\"删除成功\");\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    indexMethod: function indexMethod(index) {\n      return (this.currentPage - 1) * 10 + index + 1;\n    },\n    searchTeacher: function searchTeacher() {\n      var that = this;\n      axios.get(\"http://localhost:8080/api/teacherInfos/selectTeacherByName\", {\n        params: {\n          teacherName: this.teacherName\n        }\n      }).then(function (response) {\n        that.$message({\n          message: '查询成功',\n          type: 'success',\n          duration: '1000',\n          center: true\n        });\n        that.loading = true;\n        that.timer = setTimeout(function () {\n          //设置延迟执行\n          that.loading = false;\n          that.tableData = response.data;\n        }, 1000);\n        document.getElementById('paging').style.display = 'block';\n      }).catch(function (error) {\n        // console.log(error)\n        Message.error(\"请检查网络\");\n      });\n    },\n    exportExcel: function exportExcel(excelName) {\n      //excelName --设置导出的excel名称\n      //report-table --对应的要导出的el-table的ref名称\n      try {\n        var $e = this.$refs['evtTable'].$el; // 如果表格加了fixed属性，则导出的文件会生产两份一样的数据，所以可在这里判断一下\n\n        var $table = $e.querySelector('.el-table__fixed');\n\n        if (!$table) {\n          $table = $e;\n        } // 为了返回单元格原始字符串，设置{ raw: true }\n\n\n        var wb = XLSX.utils.table_to_book($table, {\n          raw: true\n        });\n        var wbout = XLSX.write(wb, {\n          bookType: 'xlsx',\n          bookSST: true,\n          type: 'array'\n        });\n        FileSaver.saveAs(new Blob([wbout], {\n          type: 'application/octet-stream'\n        }), \"\".concat(excelName, \".xlsx\"));\n      } catch (e) {\n        if (typeof console !== 'undefined') console.error(e);\n      }\n    },\n    init: function init() {\n      var that = this;\n      axios.get(\"http://localhost:8080/api/teacherInfos/selectAllTeacher\").then(function (response) {\n        that.tableData = response.data;\n        Message.success(\"查询成功\"); // console.log(that.tableData)\n\n        document.getElementById('paging').style.display = 'block';\n      }).catch(function (error) {\n        // console.log(error)\n        Message.error(\"请检查网络\");\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  }\n};",{"version":3,"sources":["messageTea.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div style=\"background-color: #FFFFFF;\">\r\n\t\t<!-- 上半部分 -->\r\n\t\t<div style=\"height: 60px;\">\r\n\t\t\t<div style=\"padding: 12px;\">\r\n\t\t\t\t&nbsp;\r\n\t\t\t\t教师姓名\r\n\t\t\t\t&emsp;\r\n\t\t\t\t<el-input placeholder=\"教师姓名\" v-model=\"teacherName\" style=\"width: 200px;\">\r\n\t\t\t\t</el-input>\r\n\t\t\t\t&emsp;\r\n\t\t\t\t<el-button type=\"primary\" @click=\"searchTeacher()\">\r\n\t\t\t\t\t<i class=\"iconfont iconxingtaiduICON_sousuo---copy\"></i>\r\n\t\t\t\t\t搜索\r\n\t\t\t\t</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"exportExcel('教师表')\">\r\n\t\t\t\t\t<i class=\"iconfont iconxingtaiduICON_sousuo---copy\"></i>\r\n\t\t\t\t\t导出表格\r\n\t\t\t\t</el-button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\r\n\t\t<!-- 下半部分 -->\r\n\t\t<div style=\"height: 570px;\">\r\n\t\t\t<div style=\"padding: 12px;\">\r\n\r\n\t\t\t\t<el-table :data=\"tableData.slice((currentPage-1)*10,currentPage*10)\" style=\"width: 100%\" height=\"520px\"\r\n\t\t\t\t\tv-loading=\"loading\" ref=\"evtTable\">\r\n\t\t\t\t\t<el-table-column label=\"#\" :index=\"indexMethod\" type=\"index\" align=\"center\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"teacher_id\" label=\"教师工号\" align=\"center\">\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"name\" label=\"教师姓名\" align=\"center\">\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"password\" label=\"教师密码\" align=\"center\">\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column label=\"操作\" width=\"300\" align=\"center\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"mini\" @click=\"clickRowHandle(scope.$index, scope.row)\">\r\n\t\t\t\t\t\t\t\t<i class=\"iconfont iconxiangqing\"></i>\r\n\t\t\t\t\t\t\t\t查看详情\r\n\t\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t\t<el-button type=\"warning\" size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">\r\n\t\t\t\t\t\t\t\t<i class=\"iconfont iconxuanze\"></i>\r\n\t\t\t\t\t\t\t\t编辑\r\n\t\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t\t<!-- <el-button type=\"danger\" size=\"mini\" @click=\"handleDelete(scope.$index, scope.row)\">\r\n\t\t\t\t\t\t\t\t<i class=\"iconfont iconxuanze\"></i>\r\n\t\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t\t</el-button> -->\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\r\n\t\t\t\t\t<!-- 展开行 -->\r\n\t\t\t\t\t<el-table-column type=\"expand\" width=\"1\">\r\n\t\t\t\t\t\t<template slot-scope=\"props\">\r\n\t\t\t\t\t\t\t<el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n\t\t\t\t\t\t\t\t<el-form-item label=\"身份证号\">\r\n\t\t\t\t\t\t\t\t\t<span>{{ props.row.id_card }}</span>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<el-form-item label=\"性别\">\r\n\t\t\t\t\t\t\t\t\t<span>{{ props.row.sex }}</span>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<el-form-item label=\"生日\">\r\n\t\t\t\t\t\t\t\t\t<span>{{ props.row.birthday }}</span>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<el-form-item label=\"手机号\">\r\n\t\t\t\t\t\t\t\t\t<span>{{ props.row.phone }}</span>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<el-form-item label=\"邮箱\">\r\n\t\t\t\t\t\t\t\t\t<span>{{ props.row.email }}</span>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<el-form-item label=\"自我介绍\">\r\n\t\t\t\t\t\t\t\t\t<span>{{ props.row.remark }}</span>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t</el-form>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\r\n\r\n\t\t\t\t</el-table>\r\n\r\n\t\t\t\t<el-pagination @current-change=\"handleCurrentChange\" :current-page.sync=\"currentPage\" :page-size=\"10\"\r\n\t\t\t\t\tlayout=\"total, prev, pager, next\" :total='tableData.length' id=\"paging\">\r\n\t\t\t\t</el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t\r\n\t\t<!-- 选题嵌套表单 -->\r\n\t\t<el-dialog title=\"编辑教师信息\" :visible.sync=\"dialogFormVisible\" style=\"width: 600px;margin-left: 30%;margin-top: 5%;\">\r\n\t\t\t<el-form :model=\"form\">\r\n\t\t\t\t<el-form-item label=\"姓名\">\r\n\t\t\t\t\t<el-input v-model=\"form.teacherName\" placeholder=\"学生姓名\" style=\"width: 200px;\">\r\n\t\t\t\t\t</el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"密码\">\r\n\t\t\t\t\t<el-input v-model=\"form.password\" placeholder=\"学生密码\" style=\"width: 200px;\">\r\n\t\t\t\t\t</el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"cancelChoice()\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"confirmChoice()\">确 定</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t\t\r\n\t\t\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport FileSaver from 'file-saver'\r\n\timport XLSX from 'xlsx'\r\n\timport axios from 'axios';\r\n\timport {\r\n\t\tMessage\r\n\t} from 'element-ui';\r\n\texport default {\r\n\t\tname: \"MessageTea\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdialogFormVisible: false,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tteacherName: '',\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tcurrentPage: 1,\r\n\t\t\t\tform: {\r\n\t\t\t\t\tteacherID:'',\r\n\t\t\t\t\tteacherName: '',\r\n\t\t\t\t\tpassword: ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tconfirmChoice(){\r\n\t\t\t\tthis.dialogFormVisible = false\r\n\t\t\t\tthis.$confirm('此操作将修改教师基本信息, 是否继续?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\t// console.log(this.form)\r\n\t\t\t\t\tlet that = this\r\n\t\t\t\t\taxios.post(\"http://localhost:8080/api/teacherInfos/updateTeacherInfo\", {\r\n\t\t\t\t\t\t\tteacher_id:this.form.teacherID,\r\n\t\t\t\t\t\t\tpassword:this.form.password,\r\n\t\t\t\t\t\t\tname:this.form.teacherName\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t\t// console.log(that.form)\r\n\t\t\t\t\t\t\tthat.dialogFormVisible = false\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\tmessage: '编辑成功',\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\tduration: '1000',\r\n\t\t\t\t\t\t\t\tcenter: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthat.loading = true\r\n\t\t\t\t\t\t\tthat.timer = setTimeout(() => { //设置延迟执行\r\n\t\t\t\t\t\t\t\tthat.loading = false\r\n\t\t\t\t\t\t\t\tthat.init()\r\n\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\tthat.dialogFormVisible = false\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\tMessage.error(error.response.data)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: '已取消'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tcancelChoice() {\r\n\t\t\t\tthis.dialogFormVisible = false\r\n\t\t\t\tMessage.error(\"已取消\")\r\n\t\t\t},\r\n\t\t\tclickRowHandle(index, row) {\r\n\t\t\t\tthis.$refs.evtTable.toggleRowExpansion(row);\r\n\t\t\t},\r\n\t\t\thandleEdit(index, row) {\r\n\t\t\t\tthis.form.teacherID = row.teacher_id\r\n\t\t\t\tthis.form.teacherName = row.name\r\n\t\t\t\tthis.form.password = row.password\r\n\t\t\t\tthis.dialogFormVisible = true\r\n\t\t\t},\r\n\t\t\thandleDelete(index, row) {\r\n\t\t\t\tMessage.success(\"删除成功\")\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(val) {\r\n\t\t\t\tthis.currentPage = val;\r\n\t\t\t},\r\n\t\t\tindexMethod(index) {\r\n\t\t\t\treturn (this.currentPage - 1) * 10 + index + 1\r\n\t\t\t},\r\n\t\t\tsearchTeacher() {\r\n\r\n\t\t\t\tlet that = this\r\n\t\t\t\taxios.get(\"http://localhost:8080/api/teacherInfos/selectTeacherByName\", {\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tteacherName: this.teacherName\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(function(response) {\r\n\r\n\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\tmessage: '查询成功',\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tduration: '1000',\r\n\t\t\t\t\t\t\tcenter: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.loading = true\r\n\t\t\t\t\t\tthat.timer = setTimeout(() => { //设置延迟执行\r\n\t\t\t\t\t\t\tthat.loading = false\r\n\t\t\t\t\t\t\tthat.tableData = response.data\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\tdocument.getElementById('paging').style.display = 'block'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t// console.log(error)\r\n\t\t\t\t\t\tMessage.error(\"请检查网络\")\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\texportExcel(excelName) {\r\n\t\t\t\t//excelName --设置导出的excel名称\r\n\t\t\t\t//report-table --对应的要导出的el-table的ref名称\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst $e = this.$refs['evtTable'].$el;\r\n\t\t\t\t\t// 如果表格加了fixed属性，则导出的文件会生产两份一样的数据，所以可在这里判断一下\r\n\t\t\t\t\tlet $table = $e.querySelector('.el-table__fixed');\r\n\t\t\t\t\tif (!$table) {\r\n\t\t\t\t\t\t$table = $e;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 为了返回单元格原始字符串，设置{ raw: true }\r\n\t\t\t\t\tconst wb = XLSX.utils.table_to_book($table, {\r\n\t\t\t\t\t\traw: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconst wbout = XLSX.write(wb, {\r\n\t\t\t\t\t\tbookType: 'xlsx',\r\n\t\t\t\t\t\tbookSST: true,\r\n\t\t\t\t\t\ttype: 'array'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tFileSaver.saveAs(\r\n\t\t\t\t\t\tnew Blob([wbout], {\r\n\t\t\t\t\t\t\ttype: 'application/octet-stream'\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t`${excelName}.xlsx`,\r\n\t\t\t\t\t);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tif (typeof console !== 'undefined') console.error(e);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinit(){\r\n\t\t\t\tlet that = this\r\n\t\t\t\taxios.get(\"http://localhost:8080/api/teacherInfos/selectAllTeacher\")\r\n\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\tthat.tableData = response.data\r\n\t\t\t\t\t\tMessage.success(\"查询成功\")\r\n\t\t\t\t\t\t// console.log(that.tableData)\r\n\t\t\t\t\t\tdocument.getElementById('paging').style.display = 'block'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t// console.log(error)\r\n\t\t\t\t\t\tMessage.error(\"请检查网络\")\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.init()\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\n"],"sourceRoot":"src/views/leader/manager"}]}